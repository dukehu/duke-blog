<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.duke.microservice.blog.mapper.extend.BlogArticleExtendMapper">
    <select id="selectByUserId" resultType="com.duke.microservice.blog.domain.extend.BlogArticleList">
        SELECT
            ba.id          AS id,
            ba.title       AS title,
            ba.summary     AS summary,
            ba.create_time AS publishTime,
            ba.article_views as articleViews
        FROM
            blog_article ba
        WHERE ba.user_id = #{userId, jdbcType=VARCHAR}
    </select>

    <update id="updateArticleViewsById">
        update blog_article
        set article_views = #{articleViews, jdbcType=INTEGER}
        where id = #{id, jdbcType=VARCHAR};
    </update>

    <select id="latestRecommendedArticles"
            resultType="com.duke.microservice.blog.domain.extend.BlogArticleList">
        select id as id, title as title
        from blog_article order by create_time desc limit 5;
    </select>
</mapper>